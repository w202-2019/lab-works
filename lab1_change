clear all
close all
clc
N=16; % кол-во клиентов
M=166; % кол-во повторений попадания клиетов в матрицу 
lamda=[0:(1/N)/20:1/N]; % интенсивность входного потока для Q и R
T=zeros(1,length(lamda)); % создаем массив (среднее время пребывания заввки в буфере (очередь)
S=zeros(1,length(lamda));
for i=2:length(lamda) % создаем цикл, где находим Q и R для каждой lamda
    Q=zeros(1,M); % объявление массива (кол-во заявок в буфере)
    R=binornd(1,lamda(i),M,N); %матрица 0 и 1
    r=sum(R,2); %сумма по строкам
    r1=sum(R); %сумма по столбцам
    for j=2:166
        if Q(j-1)>0
            Q(j)=Q(j-1)+r(j)-1;
        else
            Q(j)=r(j);
        end;
    end;
    u=0;
    %нахождение заявок, которые попали в слот. Т.е. заявок в слот пришло больше 1, или по другому потерянные заявки
    for l=1:N
        if r1(l)>1
            u=u+r1(l);
        end;
    end;
    S(i)=u/sum(r1); %сумма потеренных заявок делить на общее число пришедших заявок
    T(i)= mean(Q)/lamda(i);% (по теореме литтла N = lambda * T) mean(Q) - среднее кол-ко заявок в буфере T - среднее время пребыания заявки в буфере
end;

figure(1)
plot(lamda,T)
grid on

figure(2)
plot(lamda,S)
grid on
